

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pymongolab.collection &mdash; PyMongoLab 1.1 documentation</title>
    
    <link rel="stylesheet" href="../../static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PyMongoLab 1.1 documentation" href="../../index.html" />
    <link rel="up" title="pymongolab" href="../pymongolab.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <div class="headertitle"><a
          href="../../index.html">PyMongoLab 1.1 documentation</a></div>
        <div class="rel">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pymongolab.collection</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 *-*</span>
<span class="kn">from</span> <span class="nn">pymongolab</span> <span class="kn">import</span> <span class="n">cursor</span>
<span class="kn">from</span> <span class="nn">bson.objectid</span> <span class="kn">import</span> <span class="n">ObjectId</span>


<div class="viewcode-block" id="Collection"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection">[docs]</a><span class="k">class</span> <span class="nc">Collection</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;For instance this class, you needs an instance of</span>
<span class="sd">    :class:`pymongolab.database.Database` and the name of your collection.</span>

<span class="sd">    Example usage:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; from pymongolab import MongoClient, database, collection</span>
<span class="sd">       &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">       &gt;&gt;&gt; db = database.Database(con, &quot;database&quot;)</span>
<span class="sd">       &gt;&gt;&gt; collection.Collection(db, &quot;collection&quot;)</span>
<span class="sd">       Collection(Database(MongoClient(&#39;MongoLabAPIKey&#39;, &#39;v1&#39;),</span>
<span class="sd">       &#39;database&#39;), &#39;collection&#39;)</span>

<span class="sd">    Easy usage (Attibute-style access):</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">       &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">       &gt;&gt;&gt; db = con.database</span>
<span class="sd">       &gt;&gt;&gt; db.collection</span>
<span class="sd">       Collection(Database(MongoClient(&#39;MongoLabAPIKey&#39;, &#39;v1&#39;),</span>
<span class="sd">       &#39;database&#39;), &#39;collection&#39;)</span>

<span class="sd">    Easy usage (Dictionary-style access):</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">       &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">       &gt;&gt;&gt; db = con[&quot;database&quot;]</span>
<span class="sd">       &gt;&gt;&gt; db[&quot;collection&quot;]</span>
<span class="sd">       Collection(Database(MongoClient(&#39;MongoLabAPIKey&#39;, &#39;v1&#39;),</span>
<span class="sd">       &#39;database&#39;), &#39;collection&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__full_name</span> <span class="o">=</span> <span class="s">u&quot;</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="Collection.database"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.database">[docs]</a>    <span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An instance of :class:`pymongolab.database.Database` used for</span>
<span class="sd">        internal calls to MongoLab REST API via :mod:`mongolabclient`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__database</span>
</div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Collection.full_name"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.full_name">[docs]</a>    <span class="k">def</span> <span class="nf">full_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name of this :class:`pymongolab.collection.Collection`.</span>

<span class="sd">        The full name is of the form `database_name.collection_name`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__full_name</span>
</div>
    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Collection</span><span class="p">):</span>
            <span class="n">us</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">them</span> <span class="o">=</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">us</span> <span class="o">==</span> <span class="n">them</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;Collection(</span><span class="si">%r</span><span class="s">, </span><span class="si">%r</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="Collection.next"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;&#39;Collection&#39; object is not iterable&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Collection.find"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">{},</span> <span class="n">skip</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the database.</span>

<span class="sd">        Returns an instance of :class:`pymongolab.cursor.Cursor` with the</span>
<span class="sd">        result set.</span>

<span class="sd">        :Parameters:</span>
<span class="sd">            - `spec` (optional): a dict specifying elements which must be</span>
<span class="sd">              present for a document to be included in the result set</span>
<span class="sd">            - `fields` (optional): a dict specifying the fields to return</span>
<span class="sd">            - `sort` (optional): a list of (key, direction) pairs specifying</span>
<span class="sd">              the sort order for this query.</span>
<span class="sd">            - `skip` (optional): the number of documents to omit (from the</span>
<span class="sd">              start of the result set) when returning the results</span>
<span class="sd">            - `limit` (optional): the maximum number of results to return</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; con.database.collection.find()</span>
<span class="sd">           &lt;pymongolab.cursor.Cursor object at 0x1972490&gt;</span>
<span class="sd">           &gt;&gt;&gt; list(con.database.collection.find())</span>
<span class="sd">           [{u&#39;_id&#39;: ObjectId(&#39;50243d38e4b00c3b3e75fc94&#39;), u&#39;foo&#39;: u&#39;bar&#39;,</span>
<span class="sd">           u&#39;tld&#39;: u&#39;com&#39;}, {u&#39;_id&#39;: ObjectId(&#39;50004d646cf431171ed53846&#39;),</span>
<span class="sd">           u&#39;foo&#39;: u&#39;bar&#39;, u&#39;tld&#39;: u&#39;org&#39;}]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="n">ObjectId</span><span class="p">)</span> <span class="ow">or</span> \
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">view_document</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">skip</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Collection.find_one"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.find_one">[docs]</a>    <span class="k">def</span> <span class="nf">find_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the database.</span>

<span class="sd">        Return an instance of :class:`dict` with the first document of query</span>
<span class="sd">        result on None if no results.</span>

<span class="sd">        :Paramaters:</span>
<span class="sd">            - `spec_or_id` (optional): a dict specifying elements which must be</span>
<span class="sd">              present for a document to be included in the result set or a _id</span>
<span class="sd">              value.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; con.database.collection.find_one()</span>
<span class="sd">           {u&#39;_id&#39;: ObjectId(&#39;50243d38e4b00c3b3e75fc94&#39;), u&#39;foo&#39;: u&#39;bar&#39;,</span>
<span class="sd">           u&#39;tld&#39;: u&#39;com&#39;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="n">ObjectId</span><span class="p">)</span> <span class="ow">or</span> \
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">view_document</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">spec_or_id</span><span class="p">:</span>
            <span class="n">spec_or_id</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">documents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">documents</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="n">documents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Collection.count"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.count">[docs]</a>    <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of documents into a collection.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; con.database.collection.count()</span>
<span class="sd">           22</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="Collection.distinct"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.distinct">[docs]</a>    <span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of distinct values for `key` among all documents in this</span>
<span class="sd">        collection.</span>

<span class="sd">        :Parameters:</span>
<span class="sd">            - `key`: name of key for which we want to get the distinct values.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; con.database.collection.distinct(&quot;title&quot;)</span>
<span class="sd">           [u&#39;first title&#39;, u&#39;second title&#39;, u&#39;my title&#39;, u&#39;your title&#39;]</span>

<span class="sd">        .. versionadded:: 1.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">command</span><span class="p">({</span><span class="s">&#39;distinct&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s">&#39;key&#39;</span><span class="p">:</span> <span class="n">key</span><span class="p">})[</span><span class="s">&#39;values&#39;</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Collection.insert"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc_or_docs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Insert a document or documents into this collection.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; doc = {&quot;foo&quot;: &quot;bar&quot;}</span>
<span class="sd">           &gt;&gt;&gt; docs = [{&quot;foo&quot;: &quot;bar&quot;}, {&quot;foo&quot;: &quot;bar&quot;}]</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; #Inserting a document</span>
<span class="sd">           ... con.database.collection.insert(doc)</span>
<span class="sd">           {u&#39;foo&#39;: u&#39;bar&#39;, u&#39;_id&#39;: ObjectId(&#39;50242e46e4b0926293fd4d7c&#39;)}</span>
<span class="sd">           &gt;&gt;&gt; #Inserting documents</span>
<span class="sd">           ... con.database.collection.insert(docs)</span>
<span class="sd">           {u&#39;n&#39;: 2}</span>

<span class="sd">        If you insert a document only, this function returns an instance of</span>
<span class="sd">        :class:`dict` of inserted document including as attribute `_id` an</span>
<span class="sd">        instance of :class:`bson.objectid.ObjectId`. Else, this function</span>
<span class="sd">        returns the number of inserted documents.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">insert_documents</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">doc_or_docs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Collection.update"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">upsert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">multi</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update a document or documents into this collection.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; list(con.database.collection.find())</span>
<span class="sd">           [{u&#39;_id&#39;: ObjectId(&#39;50243d38e4b00c3b3e75fc94&#39;), u&#39;foo&#39;: u&#39;bar&#39;,</span>
<span class="sd">           u&#39;tld&#39;: u&#39;org&#39;}]</span>
<span class="sd">           &gt;&gt;&gt; con.database.collection.update({&quot;foo&quot;: &quot;bar&quot;},</span>
<span class="sd">           ...    {&quot;$set&quot;: {&quot;tld&quot;: &quot;com&quot;}})</span>
<span class="sd">           1</span>
<span class="sd">           &gt;&gt;&gt; list(con.database.collection.find())</span>
<span class="sd">           [{u&#39;_id&#39;: ObjectId(&#39;50243d38e4b00c3b3e75fc94&#39;), u&#39;foo&#39;: u&#39;bar&#39;,</span>
<span class="sd">           u&#39;tld&#39;: u&#39;com&#39;}]</span>
<span class="sd">           &gt;&gt;&gt; con.database.othercollection.update({&quot;foo&quot;:&quot;bar&quot;},</span>
<span class="sd">           ...    {&quot;$set&quot;: {&quot;tld&quot;: &quot;com&quot;}}, multi=True)</span>
<span class="sd">           6</span>

<span class="sd">        .. warning::</span>

<span class="sd">           Update operation defaults affects to first document that matchs with</span>
<span class="sd">           `spec` parameter. Then for other usages it&#39;s better to use `multi`</span>
<span class="sd">           parameter on `True`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">update_documents</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">upsert</span><span class="p">,</span> <span class="n">multi</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Collection.reindex"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.reindex">[docs]</a>    <span class="k">def</span> <span class="nf">reindex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rebuilds all indexes on this collection.</span>

<span class="sd">        .. warning:: reindex blocks all other operations (indexes</span>
<span class="sd">           are built in the foreground) and will be slow for large</span>
<span class="sd">           collections.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; con.database.collection.reindex()</span>
<span class="sd">           {u&#39;ok&#39;: 1.0, u&#39;indexes&#39;: [{u&#39;ns&#39;: u&#39;mydb.mycoll&#39;, u&#39;name&#39;: u&#39;_id_&#39;,</span>
<span class="sd">           u&#39;key&#39;: {u&#39;_id&#39;: 1}}], u&#39;msg&#39;: u&#39;indexes dropped for collection&#39;,</span>
<span class="sd">           u&#39;nIndexes&#39;: 1, u&#39;nIndexesWas&#39;: 1.0}</span>

<span class="sd">        .. versionadded:: 1.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s">&#39;reIndex&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">result</span><span class="p">[</span><span class="s">&#39;serverUsed&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">result</span>
</div>
<div class="viewcode-block" id="Collection.remove"><a class="viewcode-back" href="../../pymongolab/collection.html#pymongolab.collection.Collection.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a document or documents into this collection.</span>

<span class="sd">        Example usage:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">           &gt;&gt;&gt; from pymongolab import MongoClient</span>
<span class="sd">           &gt;&gt;&gt; con = MongoClient(&quot;MongoLabAPIKey&quot;)</span>
<span class="sd">           &gt;&gt;&gt; #Deleting a document</span>
<span class="sd">           ... con.database.collection.remove({&quot;foo&quot;: &quot;bar&quot;})</span>
<span class="sd">           2</span>
<span class="sd">           &gt;&gt;&gt; #Deleting all documents</span>
<span class="sd">           ... con.database.collection.remove()</span>
<span class="sd">           22</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="n">ObjectId</span><span class="p">)</span> <span class="ow">or</span> \
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec_or_id</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">delete_document</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">spec_or_id</span><span class="p">:</span>
            <span class="n">spec_or_id</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">delete_replace_documents</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">spec_or_id</span><span class="p">,</span> <span class="p">[])</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Usage examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Packages</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="../../genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>